#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "🔍 Validating commit message format (Conventional Commits)..."

commit_msg_file=$1
commit_msg=$(head -n1 "$commit_msg_file")

if ! echo "$commit_msg" | grep -qE "^(feat|fix|chore|docs|style|refactor|perf|test)(\([a-z0-9\-]+\))?: .+"; then
  echo "❌ Commit message does not follow Conventional Commits format."
  echo "🔧 Example: feat: add user login functionality"
  exit 1
fi

echo "✅ Commit message is valid!"
